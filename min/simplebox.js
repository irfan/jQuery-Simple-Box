(function(d){var r=d(document),c=d(window),l="simplebox",o,b,a,j,f,k=false,n=false,m,p=[],s=false,q,i=false,e;d.fn.simplebox=function(u,t){if(t){e=t}c.bind("init.sb",h.init);d(this).each(function(v,y){var w=d(this),x=d.extend(true,{},g,u);w.bind(x.event,function(z){z.preventDefault();d(this).trigger("start.sb")});w.bind("start.sb",h.start).bind("close.sb",h.close).bind("destroy.sb",h.destroy);if(x.type=="gallery"){if(!p[x.galleryName]){p[x.galleryName]=new Array()}p[x.galleryName].push(w);x.galleryId=p[x.galleryName].length;w.bind("next.sb prev.sb",h.changeImage)}w.data(l,x)});if(!n){c.trigger("init.sb")}return this};var h={init:function(t){d("body").append('<div id="sbOverlay" /> <div id="sbContainer"><div id="sbContent" /><div id="sbControls"><a href="#close" id="sbCloseButton">Kapat</a><a href="#next" id="sbNextButton">Sonraki</a><a href="#prev" id="sbPrevButton">Önceki</a></div></div><div id="sbLoading">Yükleniyor...</div>');o=d("#sbOverlay"),a=d("#sbContent"),j=d("#sbContainer"),f=d("#sbControls"),b=d("#sbLoading");n=true;return this},setError:function(t){a.html("This content is not available right now");h.autoSize(t);s=false;return this},autoSize:function(t){d(t.target).data(l).width="auto",d(t.target).data(l).height="auto";return this},createImage:function(v,t){var u=new Image();u.id="sbImage";u.onerror=function(){h.setError(v);s=true;i=false};u.onload=function(){h.setImage(v,u);s=true;i=false};u.src=t;return this},setImage:function(w,v){var t=d(w.target),u=t.data(l);if(v.width>c.width()){v.width=c.width()*0.8}if(v.height>c.height()){v.height=c.height()*0.8}t.data(l).width=v.width;t.data(l).height=v.height;t.data(l).height="auto";a.html(v)},show:function(x){if(!s){if(q){clearInterval(q)}q=setInterval(function(){h.start(x)},50);return}else{clearInterval(q)}var v=d(x.target),w=v.data(l);if(w.overlay){if(w.effect==="fade"){j.fadeIn(w.duration)}else{o.show();j.show()}}else{j.fadeIn(w.duration)}o.unbind(w.closeEvent);if(w.overlayClose){o.bind(w.closeEvent,function(z){z.preventDefault();v.trigger("close.sb",z)})}var u=d(w.closeSelector);u.die();u.live(w.closeEvent,function(z){z.preventDefault();v.trigger("close.sb")});if(w.type=="gallery"){var t=d(w.nextSelector),y=d(w.prevSelector);t.die(w.nextEvent);y.die(w.nextEvent);t.live(w.nextEvent,function(z){z.preventDefault();v.trigger("next.sb")}).show();y.live(w.prevEvent,function(z){z.preventDefault();v.trigger("prev.sb")}).show();if(p[w.galleryName].length==w.galleryId){t.die(w.nextEvent).hide()}if(w.galleryId==1){y.die(w.nextEvent).hide()}if(p[w.galleryName].length==1){t.die(w.nextEvent).hide();y.die(w.nextEvent).hide()}}else{d(w.prevSelector).die(w.prevEvent).hide();d(w.nextSelector).die(w.nextEvent).hide()}if(!w.showControls){f.hide()}else{f.show()}k=true;return},start:function(x){h.loading(x);if(i){return}i=true;var u=d(x.target),w=u.data(l),v=u.attr("href");m=u;j.css({width:w.width,height:w.height,padding:w.padding,"background-color":w.bg});if(v.substring(0,1)==="#"){var t=d(v);if(t.length>0){h.fillContent(x,t.html())}else{h.setError(x)}}else{if(v.substring(0,1)==="/"){s=true;i=false;d.ajax({url:v,type:w.ajaxMethod,success:function(y){if(y.success){h.fillContent(x,y.html)}}})}else{h.getImage(x,v)}}c.bind("resize scroll mousewheel onscroll",function(y){h.repos(y)});return this},fillContent:function(u,t){a.html(t);h.repos();h.show(u);s=true;i=false},getImage:function(u,t){h.createImage(u,t);h.repos();h.show(u)},close:function(v){var u=d(v.target),t=u.data(l);if(t.effect==="fade"){j.fadeOut(t.duration,function(){o.fadeOut(t.duration);u.trigger("destroy.sb")})}else{j.hide();o.hide();u.trigger("destroy.sb")}k=false;s=false;i=false;c.unbind("resize scroll mousewheel onscroll");return this},destroy:function(v){var u=d(v.target),t=u.data(l);a.empty();return this},repos:function(v){var u=m.data(l);if(typeof(u.height)=="number"){var w=(c.height()/2)-(u.height/2),t=(c.width()/2)-(u.width/2)}else{var w=(c.height()/2)-(j.height()/2),t=(c.width()/2)-(j.width()/2)}if(c.scrollTop()>0){w=w+c.scrollTop()}if(c.scrollLeft()>0){t=t+c.scrollLeft()}j.css({left:t,top:w});llp=(t+(j.width()/2))-(b.width()/2);ltp=(w+(j.height()/2))-(b.height()/2);b.css({left:llp,top:ltp});return this},changeImage:function(v){h.loading(v);var t=d(v.target),u=t.data(l),w=u.galleryId;if(v.type=="prev"){w=u.galleryId-2}j.fadeOut(function(){d(p[u.galleryName][w]).click();t.trigger("destroy.sb")});k=false;s=false;i=false;c.unbind("resize scroll mousewheel onscroll")},loading:function(v){if(i){b.show()}else{b.hide()}if(!o.is(":visible")){var t=d(v.target),u=t.data(l);o.css({"background-color":u.color,opacity:u.opacity,});o.css("height",r.height());if(u.overlay){if(u.effect=="fade"){o.fadeIn(u.duration)}else{o.fadeIn(u.duration)}}return}}},g={event:"click",showControls:true,ajaxMethod:"GET",closeEvent:"click",closeSelector:"#sbCloseButton",nextEvent:"click",nextSelector:"#sbNextButton",prevEvent:"click",prevSelector:"#sbPrevButton",effect:"fade",duration:150,width:485,height:300,padding:10,bg:"#FFF",overlay:true,color:"#000",opacity:0.7,overlayClose:true,type:"single",galleryName:false,debug:false}})(jQuery);