(function(d){var r=d(document),c=d(window),l="simplebox",o,b,a,j,f,k=false,n=false,m,p=[],s=false,q,i=false,e;d.fn.simplebox=function(t,u){u=u||function(){};c.bind("init.sb",h.init);this.each(function(w,y){var x=d(this),v=d.extend(true,{},g,t);x.bind(v.event,function(z){z.preventDefault();d(this).trigger("start.sb")});x.bind("start.sb",h.start).bind("close.sb",h.close).bind("destroy.sb",h.destroy);if(v.type=="gallery"){if(!p[v.galleryName]){p[v.galleryName]=new Array()}p[v.galleryName].push(x);v.galleryId=p[v.galleryName].length;x.bind("next.sb prev.sb",h.changeImage)}x.data(l,v)});if(!n){c.trigger("init.sb")}return this};var h={init:function(t){d("body").append('<div id="sbOverlay" /> <div id="sbContainer"><div id="sbContent" /><div id="sbControls"><a href="#close" id="sbCloseButton">Kapat</a><a href="#next" id="sbNextButton">Sonraki</a><a href="#prev" id="sbPrevButton">Önceki</a></div></div><div id="sbLoading">Yükleniyor...</div>');o=d("#sbOverlay"),a=d("#sbContent"),j=d("#sbContainer"),f=d("#sbControls"),b=d("#sbLoading");n=true;return this},setError:function(t){a.html("This content is not available right now");h.autoSize(t);s=false;return this},autoSize:function(t){d(t.target).data(l).width="auto",d(t.target).data(l).height="auto";return this},createImage:function(v,t){var u=new Image();u.id="sbImage";u.onerror=function(){h.setError(v);s=true;i=false};u.onload=function(){h.setImage(v,u);s=true;i=false};u.src=t;return this},setImage:function(w,v){var u=d(w.target),t=u.data(l);if(v.width>c.width()){v.width=c.width()*0.8}if(v.height>c.height()){v.height=c.height()*0.8}u.data(l).width=v.width;u.data(l).height=v.height;u.data(l).height="auto";a.html(v)},show:function(x){if(!s){if(q){clearInterval(q)}q=setInterval(function(){h.start(x)},50);return}else{clearInterval(q)}var w=d(x.target),t=w.data(l);if(t.overlay){if(t.effect==="fade"){j.fadeIn(t.duration)}else{o.show();j.show()}}else{j.fadeIn(t.duration)}o.unbind(t.closeEvent);if(t.overlayClose){o.bind(t.closeEvent,function(z){z.preventDefault();w.trigger("close.sb",z)})}var v=d(t.closeSelector);v.die();v.live(t.closeEvent,function(z){z.preventDefault();w.trigger("close.sb")});if(t.type=="gallery"){var u=d(t.nextSelector),y=d(t.prevSelector);u.die(t.nextEvent);y.die(t.nextEvent);u.live(t.nextEvent,function(z){z.preventDefault();w.trigger("next.sb")}).show();y.live(opitons.prevEvent,function(z){z.preventDefault();w.trigger("prev.sb")}).show();if(p[t.galleryName].length==t.galleryId){u.die(t.nextEvent).hide()}if(t.galleryId==1){y.die(t.nextEvent).hide()}if(p[t.galleryName].length==1){u.die(t.nextEvent).hide();y.die(t.nextEvent).hide()}}else{d(t.prevSelector).die(t.prevEvent).hide();d(t.nextSelector).die(t.nextEvent).hide()}if(!t.showControls){f.hide()}else{f.show()}k=true;return},start:function(x){h.loading(x);if(i){return}i=true;var v=d(x.target),u=v.data(l),w=v.attr("href");m=v;j.css({width:u.width,height:u.height,padding:u.padding,"background-color":u.bg});if(w.substring(0,1)==="#"){var t=d(w);if(t.length>0){h.fillContent(x,t.html())}else{h.setError(x)}}else{if(w.substring(0,1)==="/"){s=true;i=false;d.ajax({url:w,type:u.ajaxMethod,success:function(y){if(y.success){h.fillContent(x,y.html)}}})}else{h.getImage(x,w)}}c.bind("resize scroll mousewheel onscroll",function(y){h.repos(y)});return this},fillContent:function(u,t){a.html(t);h.repos();h.show(u);s=true;i=false},getImage:function(u,t){h.createImage(u,t);h.repos();h.show(u)},close:function(v){var u=d(v.target),t=u.data(l);if(t.effect==="fade"){j.fadeOut(t.duration,function(){o.fadeOut(t.duration);u.trigger("destroy.sb")})}else{j.hide();o.hide();u.trigger("destroy.sb")}k=false;s=false;i=false;c.unbind("resize scroll mousewheel onscroll");return this},destroy:function(v){var u=d(v.target),t=u.data(l);a.empty();return this},repos:function(v){var t=m.data(l);if(typeof(t.height)=="number"){var w=(c.height()/2)-(t.height/2),u=(c.width()/2)-(t.width/2)}else{var w=(c.height()/2)-(j.height()/2),u=(c.width()/2)-(j.width()/2)}if(c.scrollTop()>0){w=w+c.scrollTop()}if(c.scrollLeft()>0){u=u+c.scrollLeft()}j.css({left:u,top:w});llp=(u+(j.width()/2))-(b.width()/2);ltp=(w+(j.height()/2))-(b.height()/2);b.css({left:llp,top:ltp});return this},changeImage:function(v){h.loading(v);var u=d(v.target),t=u.data(l),w=t.galleryId;if(v.type=="prev"){w=t.galleryId-2}j.fadeOut(function(){d(p[t.galleryName][w]).click();u.trigger("destroy.sb")});k=false;s=false;i=false;c.unbind("resize scroll mousewheel onscroll")},loading:function(v){if(i){b.show()}else{b.hide()}if(!o.is(":visible")){var u=d(v.target),t=u.data(l);o.css({"background-color":t.color,opacity:t.opacity,});o.css("height",r.height());if(t.overlay){if(t.effect=="fade"){o.fadeIn(t.duration)}else{o.fadeIn(t.duration)}}return}}},g={event:"click",showControls:true,ajaxMethod:"GET",closeEvent:"click",closeSelector:"#sbCloseButton",nextEvent:"click",nextSelector:"#sbNextButton",prevEvent:"click",prevSelector:"#sbPrevButton",effect:"fade",duration:150,width:485,height:300,padding:10,bg:"#FFF",overlay:true,color:"#000",opacity:0.7,overlayClose:true,type:"single",galleryName:false,debug:false}})(jQuery);